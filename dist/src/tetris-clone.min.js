!function(t){function o(n){if(e[n])return e[n].exports;var i=e[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}var e={};return o.m=t,o.c=e,o.p="",o(0)}([function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e(1),i=document.getElementById("stop");i.addEventListener("click",function(){r.stop()});var r=new n.Game},function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e(2),i=function(){function t(){var t=this;this.levelSpeedMS=1e3,this.BOARD_WIDTH=10,this.BOARD_HEIGHT=17,this.BOARD_UNIT_SIZE=30,this.handleKeyDown=function(o){switch(o.keyCode){case 37:t.moveStoneLeft(t.currentStone);break;case 38:t.instantDown(t.currentStone);break;case 39:t.moveStoneRight(t.currentStone);break;case 40:t.moveStoneDown(t.currentStone);break;case 65:t.currentStone&&t.currentStone.rotateCCW();break;case 68:t.currentStone&&t.currentStone.rotateCW()}o.preventDefault(),o.stopPropagation()},this.instantDown=function(t){},this.run=function(){t.update(),t.draw()},this.update=function(){var o=Date.now()-t.lastUpdateTime;t.tickTimer-=o,t.tickTimer<=0&&(t.performWorldStep(),t.tickTimer=t.levelSpeedMS),t.lastUpdateTime=Date.now()},this.performWorldStep=function(){t.moveStoneDown(t.currentStone)},this.doesPositionCollide=function(o,e){return 0!=t.board[o][e]},this.draw=function(){t.clear(),t.drawBoard(),t.drawStone(t.currentStone)},this.clear=function(){t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height)},this.freezeStone=function(){t.freezeCurrentStone(),t.checkForFullLines(),t.createStone()},this.freezeCurrentStone=function(){for(var o=0;o<t.currentStone.positions.length;o++)t.board[t.currentStone.positions[o].x][t.currentStone.positions[o].y]=t.currentStone.stoneType},this.checkForFullLines=function(){for(var o=new Array,e=0;e<t.BOARD_HEIGHT;e++){for(var n=!0,i=0;i<t.BOARD_WIDTH;i++)if(0===t.board[i][e]){n=!1;break}n&&o.push(e)}t.removeLines(o)},this.copyLine=function(o,e){for(var n=0;n<t.BOARD_WIDTH;n++)t.board[n][e]=t.board[n][o]},this.removeLines=function(o){if(o&&0!==o.length){var e,n,i=1;for(e=o[o.length-1];e>=0;e--)for(n=e-i;n>=0;n--){if(o.indexOf(n)===-1){t.copyLine(n,e);break}i++}}},this.drawBoard=function(){for(var o=0;o<t.BOARD_WIDTH;o++)for(var e=0;e<t.BOARD_HEIGHT;e++)0!==t.board[o][e]&&t.drawBlock(o,e,t.board[o][e])},this.drawStone=function(o){o&&o.positions.forEach(function(e){t.drawBlock(e.x,e.y,o.stoneType)})},this.drawBlock=function(o,e,n){switch(t.ctx.beginPath(),t.ctx.lineWidth=2,t.ctx.rect(o*t.BOARD_UNIT_SIZE,e*t.BOARD_UNIT_SIZE,t.BOARD_UNIT_SIZE,t.BOARD_UNIT_SIZE),n){case 1:t.ctx.strokeStyle="green";break;case 2:t.ctx.strokeStyle="red";break;case 3:t.ctx.strokeStyle="blue";break;case 4:t.ctx.strokeStyle="yellow";break;case 5:t.ctx.strokeStyle="black";break;case 6:t.ctx.strokeStyle="purple";break;case 7:t.ctx.strokeStyle="lightblue"}t.ctx.stroke()},this.canvas=document.getElementById("board"),this.ctx=this.canvas.getContext("2d");var o=document.getElementById("gameContainer");o.addEventListener("keydown",this.handleKeyDown),this.initBoard(),this.createStone(),this.initGameLoop()}return t.prototype.initGameLoop=function(){this.lastUpdateTime=Date.now(),this.tickTimer=this.levelSpeedMS;var t=60;this.gameLoopIntervalId=setInterval(this.run,1e3/t)},t.prototype.stop=function(){this.levelSpeedMS=1e7},t.prototype.createStone=function(){var t;switch(t=Math.floor(7*Math.random())+1){case 1:this.currentStone=new n.I;break;case 2:this.currentStone=new n.J;break;case 3:this.currentStone=new n.L;break;case 4:this.currentStone=new n.O;break;case 5:this.currentStone=new n.S;break;case 6:this.currentStone=new n.T;break;case 7:this.currentStone=new n.Z}},t.prototype.moveStoneLeft=function(t){if(t){for(var o=0;o<t.positions.length;o++)if(t.positions[o].x-1<0||this.doesPositionCollide(t.positions[o].x-1,t.positions[o].y))return;for(var o=0;o<t.positions.length;o++)t.positions[o].x--}},t.prototype.moveStoneRight=function(t){if(t){for(var o=0;o<t.positions.length;o++)if(t.positions[o].x+1>=this.BOARD_WIDTH||this.doesPositionCollide(t.positions[o].x+1,t.positions[o].y))return;for(var o=0;o<t.positions.length;o++)t.positions[o].x++}},t.prototype.moveStoneDown=function(t){if(t){for(var o=0;o<t.positions.length;o++)if(t.positions[o].y+1>=this.BOARD_HEIGHT||this.doesPositionCollide(t.positions[o].x,t.positions[o].y+1))return void this.freezeStone();for(var o=0;o<t.positions.length;o++)t.positions[o].y++}},t.prototype.initBoard=function(){this.board=[];for(var t=0;t<this.BOARD_WIDTH;t++){this.board[t]=[];for(var o=0;o<this.BOARD_HEIGHT;o++)this.board[t][o]=0}this.canvas.width=this.BOARD_WIDTH*this.BOARD_UNIT_SIZE,this.canvas.height=this.BOARD_HEIGHT*this.BOARD_UNIT_SIZE},t}();o.Game=i},function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e(3);o.I=n.I;var i=e(6);o.J=i.J;var r=e(7);o.L=r.L;var s=e(8);o.O=s.O;var c=e(9);o.S=c.S;var a=e(10);o.T=a.T;var u=e(11);o.Z=u.Z},function(t,o,e){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=e(4),r=e(5),s=function(t){function o(){return t.call(this,[new r.StonePosition(3,0),new r.StonePosition(4,0,!0),new r.StonePosition(5,0),new r.StonePosition(6,0)],1)||this}return n(o,t),o.prototype.rotateCCW=function(){this.lastRotationDirection?2===this.lastRotationDirection&&t.prototype.rotateCW.call(this):t.prototype.rotateCCW.call(this)},o.prototype.rotateCW=function(){this.lastRotationDirection?1===this.lastRotationDirection&&t.prototype.rotateCCW.call(this):t.prototype.rotateCCW.call(this)},o}(i.Stone);o.I=s},function(t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var e=function(){function t(t,o){this.positions=t,this.stoneType=o,this.positionsCount=this.positions.length,this.pivotPosition=this.getPivotPosition(),this.lastRotationDirection=0}return t.prototype.rotateCCW=function(){if(this.positions&&0!==this.positions.length&&this.pivotPosition){for(var t=0;t<this.positionsCount;t++){var o=this.positions[t].x-this.pivotPosition.x,e=this.positions[t].y-this.pivotPosition.y,n=e*-1,i=o;this.positions[t].x=this.pivotPosition.x+n,this.positions[t].y=this.pivotPosition.y+i}this.lastRotationDirection=2}},t.prototype.rotateCW=function(){if(this.positions&&0!==this.positions.length&&this.pivotPosition){for(var t=0;t<this.positionsCount;t++){var o=this.positions[t].x-this.pivotPosition.x,e=this.positions[t].y-this.pivotPosition.y,n=e,i=o*-1;this.positions[t].x=this.pivotPosition.x+n,this.positions[t].y=this.pivotPosition.y+i}this.lastRotationDirection=1}},t.prototype.getPivotPosition=function(){var t=this.positions.filter(function(t){return t.isPivot});return t&&t.length>0?t[0]:null},t}();o.Stone=e},function(t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var e=function(){function t(t,o,e){void 0===e&&(e=!1),this.x=t,this.y=o,this.isPivot=e}return t}();o.StonePosition=e},function(t,o,e){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=e(4),r=e(5),s=function(t){function o(){return t.call(this,[new r.StonePosition(3,0),new r.StonePosition(4,0,!0),new r.StonePosition(5,0),new r.StonePosition(5,1)],2)||this}return n(o,t),o}(i.Stone);o.J=s},function(t,o,e){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=e(4),r=e(5),s=function(t){function o(){return t.call(this,[new r.StonePosition(3,0),new r.StonePosition(4,0,!0),new r.StonePosition(5,0),new r.StonePosition(3,1)],3)||this}return n(o,t),o}(i.Stone);o.L=s},function(t,o,e){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=e(4),r=e(5),s=function(t){function o(){return t.call(this,[new r.StonePosition(4,0),new r.StonePosition(5,0),new r.StonePosition(4,1),new r.StonePosition(5,1)],4)||this}return n(o,t),o}(i.Stone);o.O=s},function(t,o,e){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=e(4),r=e(5),s=function(t){function o(){return t.call(this,[new r.StonePosition(4,0,!0),new r.StonePosition(5,0),new r.StonePosition(3,1),new r.StonePosition(4,1)],5)||this}return n(o,t),o}(i.Stone);o.S=s},function(t,o,e){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=e(4),r=e(5),s=function(t){function o(){return t.call(this,[new r.StonePosition(3,0),new r.StonePosition(4,0,!0),new r.StonePosition(5,0),new r.StonePosition(4,1)],6)||this}return n(o,t),o}(i.Stone);o.T=s},function(t,o,e){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=e(4),r=e(5),s=function(t){function o(){return t.call(this,[new r.StonePosition(3,0),new r.StonePosition(4,0,!0),new r.StonePosition(4,1),new r.StonePosition(5,1)],7)||this}return n(o,t),o}(i.Stone);o.Z=s}]);